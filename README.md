# LockPicks [![GitHub license](https://img.shields.io/badge/license-MIT-blue.svg)](https://github.com/BGMP/LockPicks/blob/master/LICENSE.md)

#### A plugin which features a custom apartment doors system, with lockpicks to crack them open!

<img src="https://i.imgur.com/nwG7vuS.png"/>

## Prerequisites
* Java 8 or above
* [Maven](http://maven.apache.org/) (Dependency Management)

## Installation
As in any other Maven project, simply clone the repository, and launch your command prompt within it upon decompression:

  > `mvn clean package`

## Usage

In order to begin using LockPicks on your server, you will first need to get an economy plugin, otherways the plugin will not be loaded. For example, you could use [EssentialsX](https://www.spigotmc.org/resources/essentialsx.9089/) as your economy manager, yet pretty much any plugin with a [Vault](https://www.spigotmc.org/resources/vault.34315/)-based economy system will work.

Then simply add it to your `plugins/` directory where you have previously added your economy plugin into, and start the server up. LockPicks should load right away.

## Simple in-game usage guide

At the moment of starting your server, you will see a `config.yml` file is generated by the plugin within it's folder named `LockPicks/`. Within that file lay all of the configurable aspects of the plugin, so let's take a look:

<img src="https://i.imgur.com/71DQyRI.png"/>

The first lines of the configuration are pretty easy to understand, as they are the parameters the lockpick in-game object will follow to be detected by the plugin and for it function properly. If an in-game item has equal aspects to the ones labelled under `item:`, then it is a lockpick, like this one:

<img src="https://i.imgur.com/sc06Ihk.png"/>

The rest of the fields are pretty self explainatory, yet I'll explain four more: 
  * `ratio`: The probability a lockpick will have to crack an apartment door open.
  * `damage`: The damage dealt to players who fail to crack a door open as a handicap, with 0.5 equivaling to half a heart.
  * `v`: Sound's intensity.
  * `v1:` Sound's pitch.
  
Now for the second part of the configuration:

<img src="https://i.imgur.com/V6Uw8k1.png"/>

Here everything should be pretty self explainatory as well, but I'll take the freedom to elaborate on some of them and illustrate some others:

  * `auto-evict`: Sets player apartments back to a "for rent" state when players disconnect from the server if set to *true*.

The `forRentSignPlacementTrigger` field is used for the server to recognize when a sign is meant to be an apartment door, and in order to accomplish that it does a couple of things: 
  
  1. Checks if the player placing the sign has permission to create apartment doors. (lockpicks.apartment.create)
  2. Checks if the block bellow is a door (as you can see on the introduction image).

Finally, given that configuration, the plugin will check if the first line of the sign contains "[Rent]", for it to be valid. The plugin will at the same time set the price to whatever follows the first line, like this:

<img src="https://i.imgur.com/dKEbs9T.png"/>

And the resulting apartment would be:

<img src="https://i.imgur.com/BhDHxkh.png" height="337px" width="600px"/>

And when a user purchases an apartment it will look like this:

<img src="https://i.imgur.com/KXf5NxN.png" height="337px" width="600px"/>

As you can see, signs follow the configurable formats for their content listed under the `forRentSignContent` & `rentedSignContent` fields, replacing the given `%price%` & `%owner%` actively at the same time.

And last but not least, the `allowed_doors` section allows you to specify which doors you would want to be able to be turned into apartment doors. As you may have noticed there is an iron door listed down there, and that's because the plugin also supports them! Left clicking an iron door will make it interactive for the apartment owner, and the lockpick users, so they can crack them open as well.

That's it, thanks for using my awful plugin nwn.
